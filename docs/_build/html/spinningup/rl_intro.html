

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>第一部分：强化学习中的核心概念 &mdash; Spinning Up  documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/openai_icon.ico"/>
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/modify.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="第二部分：各种各种的强化学习算法" href="rl_intro2.html" />
    <link rel="prev" title="绘制结果" href="../user/plotting.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html">
          

          
            
            <img src="../_static/spinning-up-logo2.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">用户文档</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../user/introduction.html">介绍</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/installation.html">安装</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/algorithms.html">算法</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/running.html">运行试验</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/saving_and_loading.html">试验输出</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/plotting.html">绘制结果</a></li>
</ul>
<p class="caption"><span class="caption-text">强化学习介绍</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">第一部分：强化学习中的核心概念</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#id3">强化学习能做什么</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id6">核心概念和术语</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id7">状态和观察</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id8">动作空间</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id9">策略</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id10">确定性策略</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id11">随机性策略</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id12">运动轨迹</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id13">奖励和返回</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id15">强化学习问题</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id16">值函数</a></li>
<li class="toctree-l3"><a class="reference internal" href="#q">最优Q函数和最优行动</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id17">贝尔曼方程</a></li>
<li class="toctree-l3"><a class="reference internal" href="#advantage-functions">优势函数（Advantage Functions）</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id18">数学模型（可选）</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="rl_intro2.html">第二部分：各种各种的强化学习算法</a></li>
<li class="toctree-l1"><a class="reference internal" href="rl_intro3.html">第三部分：策略优化介绍</a></li>
</ul>
<p class="caption"><span class="caption-text">资源</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="spinningup.html">Spinning Up as a Deep RL Researcher</a></li>
<li class="toctree-l1"><a class="reference internal" href="keypapers.html">深度强化学习的核心论文</a></li>
<li class="toctree-l1"><a class="reference internal" href="exercises.html">练习</a></li>
<li class="toctree-l1"><a class="reference internal" href="bench.html">Benchmarks for Spinning Up Implementations</a></li>
</ul>
<p class="caption"><span class="caption-text">算法文档</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../algorithms/vpg.html">Vanilla Policy Gradient</a></li>
<li class="toctree-l1"><a class="reference internal" href="../algorithms/trpo.html">Trust Region Policy Optimization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../algorithms/ppo.html">Proximal Policy Optimization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../algorithms/ddpg.html">Deep Deterministic Policy Gradient</a></li>
<li class="toctree-l1"><a class="reference internal" href="../algorithms/td3.html">Twin Delayed DDPG</a></li>
<li class="toctree-l1"><a class="reference internal" href="../algorithms/sac.html">Soft Actor-Critic</a></li>
</ul>
<p class="caption"><span class="caption-text">工具文档</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../utils/logger.html">日志打印</a></li>
<li class="toctree-l1"><a class="reference internal" href="../utils/plotter.html">绘图</a></li>
<li class="toctree-l1"><a class="reference internal" href="../utils/mpi.html">MPI 工具</a></li>
<li class="toctree-l1"><a class="reference internal" href="../utils/run_utils.html">运行工具</a></li>
</ul>
<p class="caption"><span class="caption-text">其他</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../etc/acknowledgements.html">致谢</a></li>
<li class="toctree-l1"><a class="reference internal" href="../etc/author.html">作者</a></li>
<li class="toctree-l1"><a class="reference internal" href="../etc/translator.html">关于译者</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Spinning Up</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>第一部分：强化学习中的核心概念</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/spinningup/rl_intro.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="id1">
<h1><a class="toc-backref" href="#id20">第一部分：强化学习中的核心概念</a><a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<div class="contents topic" id="id2">
<p class="topic-title first">目录</p>
<ul class="simple">
<li><a class="reference internal" href="#id1" id="id20">第一部分：强化学习中的核心概念</a><ul>
<li><a class="reference internal" href="#id3" id="id21">强化学习能做什么</a></li>
<li><a class="reference internal" href="#id6" id="id22">核心概念和术语</a></li>
<li><a class="reference internal" href="#id18" id="id23">数学模型（可选）</a></li>
</ul>
</li>
</ul>
</div>
<p>欢迎来到强化学习的介绍！我们希望你能了解以下内容：</p>
<ul class="simple">
<li>常见的符号表示</li>
<li>高层次的讲解：关于强化学习算法究竟能做什么（我们会尽量避免 <em>如何做</em> 这个话题）</li>
<li>算法背后的核心数学知识</li>
</ul>
<p>总的来说，强化学习是关于智能体以及它们如何通过反复试错来学习的研究。它定义了通过奖励或者惩罚智能体的动作，从而使它未来更容易重复或者放弃某一动作的思想。</p>
<div class="section" id="id3">
<h2><a class="toc-backref" href="#id21">强化学习能做什么</a><a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h2>
<p>基于强化学习的方法已经在很多地方取得了成功。例如，它被用来教电脑在仿真环境下控制机器人：</p>
<video autoplay="" src="https://storage.googleapis.com/joschu-public/knocked-over-stand-up.mp4" loop="" controls="" style="display: block; margin-left: auto; margin-right: auto; margin-bottom:1.5em; width: 100%; max-width: 720px; max-height: 80vh;">
</video><p>以及在现实世界中：</p>
<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; max-width: 100%; height: auto;">
    <iframe src="https://www.youtube.com/embed/jwSbzNHGflM?ecver=1" frameborder="0" allowfullscreen style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;"></iframe>
</div>
<br /><p>强化学习因为在复杂策略游戏中有了突破而名声大噪，最著名的要数 <a class="reference external" href="https://deepmind.com/research/alphago/">围棋</a> 、 <a class="reference external" href="https://blog.openai.com/openai-five/">Dota</a> 、教电脑 <a class="reference external" href="https://deepmind.com/research/dqn/">玩Atari游戏</a> 以及训练模拟机器人 <a class="reference external" href="https://blog.openai.com/deep-reinforcement-learning-from-human-preferences/">听从人类的指令</a> 。</p>
</div>
<div class="section" id="id6">
<h2><a class="toc-backref" href="#id22">核心概念和术语</a><a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h2>
<div class="figure align-center" id="id19">
<img alt="../_images/rl_diagram_transparent_bg.png" src="../_images/rl_diagram_transparent_bg.png" />
<p class="caption"><span class="caption-text">智能体和环境的循环作用</span></p>
</div>
<p>强化学习的主要角色是 <strong>智能体</strong> 和 <strong>环境</strong> ,环境是智能体存在和互动的世界。智能体在每一步的交互中，都会获得对于所处环境状态的观察（有可能只是一部分），然后决定下一步要执行的动作。环境会因为智能体对它的动作而改变，也可能自己改变。</p>
<p>智能体也会从环境中感知到 <strong>奖励</strong> 信号，一个表明当前状态好坏的数字。智能体的目标是最大化累计奖励，也就是 <strong>回报</strong> 。强化学习就是智能体通过学习来完成目标的方法。</p>
<p>为了便于后面的学习，我们介绍一些术语，以便了解强化学习能做什么：</p>
<ul class="simple">
<li>状态和观察(states and observations)</li>
<li>动作空间(action spaces)</li>
<li>策略(policies)</li>
<li>行动轨迹(trajectories)</li>
<li>不同的回报公式(formulations of return)</li>
<li>强化学习优化问题(the RL optimization problem)</li>
<li>值函数(value functions)</li>
</ul>
<div class="section" id="id7">
<h3>状态和观察<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>
<p>一个 <strong>状态</strong> <img class="math" src="../_images/math/2f2cb3307c5fd6504354c54022ea6e82c9629309.svg" alt="s"/> 是一个关于这个世界状态的完整描述。这个世界除了状态意外没有隐藏的信息。而 <strong>观察</strong> <img class="math" src="../_images/math/58eeab1855cf765bf3b03d0cdbfc832aa81aa29e.svg" alt="o"/> 是对于一个状态的部分描述，可能会漏掉一些信息。</p>
<p>在深度强化学习中，我们一般用 <a class="reference external" href="https://en.wikipedia.org/wiki/Real_coordinate_space">实数向量、矩阵或者更高阶的张量（tensor）</a> 表示状态和观察。比如说，视觉上的 <em>观察</em> 可以用RGB矩阵的方式表示其像素值；机器人的 <em>状态</em> 可以通过关节角度和速度来表示。</p>
<p>如果智能体能够对于环境的所有状态有全面的观察，我们通常说环境是被 <strong>全面观察</strong> 的。如果智能体只能观察到一部分，我们称之为 <strong>部分观察</strong>。</p>
<div class="admonition- admonition">
<p class="first admonition-title">你应该知道</p>
<p>强化学习有时候用这个符号 <img class="math" src="../_images/math/2f2cb3307c5fd6504354c54022ea6e82c9629309.svg" alt="s"/> 代表状态 , 有些地方也会写作观察符号 <img class="math" src="../_images/math/58eeab1855cf765bf3b03d0cdbfc832aa81aa29e.svg" alt="o"/>.  尤其是：当智能体在决定采取什么动作的时候：我们会用符号表示动作是基于状态的，但实际上，动作是基于观察的，因为智能体并不知道状态（只能通过观察了解状态）。</p>
<p class="last">在我们的教程中，我们会按照标准使用符号，不过你一般能从上下文中看出来具体是什么意思。如果你对有些内容不清楚，请提出issue！我们的目的是教会大家，不是让大家混淆。</p>
</div>
</div>
<div class="section" id="id8">
<h3>动作空间<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h3>
<p>不同的环境有不同的动作。所有有效动作的集合称之为 <strong>动作空间</strong>。有些环境，比如说 Atari 游戏和围棋，具有的是 <strong>离散动作空间</strong>，这种情况下智能体只能采取有限的动作。其他的一些环境，比如智能体在物理世界控制机器人，属于 <strong>连续动作空间</strong>。在连续动作空间中，动作是实数向量。</p>
<p>这种区别对于深度强化学习影响很大。有些种类的算法只能用在某一些案例上，如果用在别的地方可能需要重写大量代码。</p>
</div>
<div class="section" id="id9">
<h3>策略<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h3>
<p><strong>策略</strong> 是智能体用于决定下一步执行什么行动的规则。可以是确定性的，一般表示为：<img class="math" src="../_images/math/0e287adf9726dd38024f3426abea7e2c0b7b2fc9.svg" alt="\mu"/>:</p>
<div class="math">
<p><img src="../_images/math/0f5d8b3765b28c1b5d94231b7c3f855b3dd0f54c.svg" alt="a_t = \mu(s_t),"/></p>
</div><p>也可以是随机的，一般表示为 <img class="math" src="../_images/math/b8a498bfdeca84b973d6222e08a6d04321d65dc3.svg" alt="\pi"/>:</p>
<div class="math">
<p><img src="../_images/math/46666d6bfea523d1f9284fcc5c6cf68922a08c1f.svg" alt="a_t \sim \pi(\cdot | s_t)."/></p>
</div><p>因为策略就是智能体的大脑，所以很多时候“策略”和“智能体”这两个名词经常互换，例如：“策略的目的是最大化奖励”。</p>
<p>在深度强化学习中，我们处理的是参数化的策略，这些策略的输出，依赖于一系列计算函数，而这些函数又依赖于参数（例如神经网络的权重和误差），所以我们可以通过一些优化算法改变智能体的的行为。</p>
<p>我们经常把这些策略的参数写作 <img class="math" src="../_images/math/1a20bd03ccceae216a40cb69d3fb7a3970f6f275.svg" alt="\theta"/> 或者 <img class="math" src="../_images/math/7ddd1396111d1df500d7b870560e135893c9b351.svg" alt="\phi"/> ，然后把它写在策略的下标上来强调两者的联系。</p>
<div class="math">
<p><img src="../_images/math/a9bd58c99ec9d2050ce15171a6feca2e754ce8c1.svg" alt="a_t &amp;= \mu_{\theta}(s_t) \\
a_t &amp;\sim \pi_{\theta}(\cdot | s_t)."/></p>
</div><div class="section" id="id10">
<h4>确定性策略<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h4>
<p><strong>例子：确定性策略：</strong> 这是一个基于 TensorFlow 在连续动作空间上确定性策略的简单例子：</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">obs</span> <span class="o">=</span> <span class="n">tf</span><span class="o">.</span><span class="n">placeholder</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="n">obs_dim</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">tf</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
<span class="n">net</span> <span class="o">=</span> <span class="n">mlp</span><span class="p">(</span><span class="n">obs</span><span class="p">,</span> <span class="n">hidden_dims</span><span class="o">=</span><span class="p">(</span><span class="mi">64</span><span class="p">,</span><span class="mi">64</span><span class="p">),</span> <span class="n">activation</span><span class="o">=</span><span class="n">tf</span><span class="o">.</span><span class="n">tanh</span><span class="p">)</span>
<span class="n">actions</span> <span class="o">=</span> <span class="n">tf</span><span class="o">.</span><span class="n">layers</span><span class="o">.</span><span class="n">dense</span><span class="p">(</span><span class="n">net</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="n">act_dim</span><span class="p">,</span> <span class="n">activation</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
</pre></div>
</div>
<p>其中， <code class="docutils literal"><span class="pre">mlp</span></code> 是一个给定大小和激活函数，把多个 <code class="docutils literal"><span class="pre">密集层</span></code> （dense layer）相互堆积在一起的函数</p>
</div>
<div class="section" id="id11">
<h4>随机性策略<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h4>
<p>深度强化学习中最常见的两种随机策略是 <strong>categorical policies</strong> 和 <strong>diagonal Gaussian policies</strong>.</p>
<p><a class="reference external" href="https://en.wikipedia.org/wiki/Categorical_distribution">Categorical</a> 策略适用于离散行动空间，而
<a class="reference external" href="https://en.wikipedia.org/wiki/Multivariate_normal_distribution">Gaussian</a> 策略一般用在连续行动空间</p>
<p>使用和训练随机策略的时候有两个重要的计算：</p>
<ul class="simple">
<li>从策略中采样行动</li>
<li>计算特定行为的似然(likelihoods) <img class="math" src="../_images/math/b86ff59c94820ebda598cd7e496b30766c08632f.svg" alt="\log \pi_{\theta}(a|s)"/>.</li>
</ul>
<p>下面我们介绍一下这两种策略</p>
<div class="admonition-categorical-policies admonition">
<p class="first admonition-title">Categorical Policies</p>
<p>A categorical policy is like a classifier over discrete actions. You build the neural network for a categorical policy the same way you would for a classifier: the input is the observation, followed by some number of layers (possibly convolutional or densely-connected, depending on the kind of input), and then you have one final linear layer that gives you logits for each action, followed by a <a class="reference external" href="https://developers.google.com/machine-learning/crash-course/multi-class-neural-networks/softmax">softmax</a> to convert the logits into probabilities.</p>
<p class="last"><strong>采样</strong> 给定每个行动的可能性，TensorFlow之类的框架有内置采样工。具体可查阅</p>
</div>
<p><a class="reference external" href="https://www.tensorflow.org/api_docs/python/tf/distributions/Categorical">tf.distributions.Categorical</a>  或 <a class="reference external" href="https://www.tensorflow.org/api_docs/python/tf/multinomial">tf.multinomial</a> 的文档。</p>
<blockquote>
<div><p><strong>Log-Likelihood.</strong> Denote the last layer of probabilities as <img class="math" src="../_images/math/979f389d6361570ecffa9bd20203ebc38e954a73.svg" alt="P_{\theta}(s)"/>. It is a vector with however many entries as there are actions, so we can treat the actions as indices for the vector. The log likelihood for an action <img class="math" src="../_images/math/045c129c396240f9c4f59bee864337cea3896ef0.svg" alt="a"/> can then be obtained by indexing into the vector:</p>
<div class="math">
<p><img src="../_images/math/57917ab8193871a92f1ec1f40756950dd7b483fb.svg" alt="\log \pi_{\theta}(a|s) = \log \left[P_{\theta}(s)\right]_a."/></p>
</div></div></blockquote>
<div class="admonition-diagonal-gaussian-policies admonition">
<p class="first admonition-title">Diagonal Gaussian Policies</p>
<p>A multivariate Gaussian distribution (or multivariate normal distribution, if you prefer) is described by a mean vector, <img class="math" src="../_images/math/0e287adf9726dd38024f3426abea7e2c0b7b2fc9.svg" alt="\mu"/>, and a covariance matrix, <img class="math" src="../_images/math/0628d30db5aa0717a34042ffa192db6e7753520a.svg" alt="\Sigma"/>. A diagonal Gaussian distribution is a special case where the covariance matrix only has entries on the diagonal. As a result, we can represent it by a vector.</p>
<p>A diagonal Gaussian policy always has a neural network that maps from observations to mean actions, <img class="math" src="../_images/math/63256a562afdee2aeadc5677ccac33e10896a289.svg" alt="\mu_{\theta}(s)"/>. There are two different ways that the covariance matrix is typically represented.</p>
<p><strong>The first way:</strong> There is a single vector of log standard deviations, <img class="math" src="../_images/math/898f05e373e384546329d1f1d4840a3bd0f23c10.svg" alt="\log \sigma"/>, which is <strong>not</strong> a function of state: the <img class="math" src="../_images/math/898f05e373e384546329d1f1d4840a3bd0f23c10.svg" alt="\log \sigma"/> are standalone parameters. (你应该知道: our implementations of VPG, TRPO, and PPO do it this way.)</p>
<p><strong>The second way:</strong> There is a neural network that maps from states to log standard deviations, <img class="math" src="../_images/math/0a3da071d616ab9afab7dbe90b3245313a7d3130.svg" alt="\log \sigma_{\theta}(s)"/>. It may optionally share some layers with the mean network.</p>
<p>Note that in both cases we output log standard deviations instead of standard deviations directly. This is because log stds are free to take on any values in <img class="math" src="../_images/math/ed0a20683a06f2589b44e531d41c359ad40bee4f.svg" alt="(-\infty, \infty)"/>, while stds must be nonnegative. It&#8217;s easier to train parameters if you don&#8217;t have to enforce those kinds of constraints. The standard deviations can be obtained immediately from the log standard deviations by exponentiating them, so we do not lose anything by representing them this way.</p>
<p><strong>Sampling.</strong> Given the mean action <img class="math" src="../_images/math/63256a562afdee2aeadc5677ccac33e10896a289.svg" alt="\mu_{\theta}(s)"/> and standard deviation <img class="math" src="../_images/math/7cee230e6ebcfed3a3ec8ff724899f6fe4c123c7.svg" alt="\sigma_{\theta}(s)"/>, and a vector <img class="math" src="../_images/math/9df411616324d64a02f28dedff6aacf05d2bf1fd.svg" alt="z"/> of noise from a spherical Gaussian (<img class="math" src="../_images/math/f8811e4365bceff49b2667b4b3eec29c3d1567f6.svg" alt="z \sim \mathcal{N}(0, I)"/>), an action sample can be computed with</p>
<div class="math">
<p><img src="../_images/math/99fb04c4b47e1e6d6e05b939d9f648f6920e3754.svg" alt="a = \mu_{\theta}(s) + \sigma_{\theta}(s) \odot z,"/></p>
</div><p>where <img class="math" src="../_images/math/8a1c8ebce519d2342df611fb6df18da32baac216.svg" alt="\odot"/> denotes the elementwise product of two vectors. Standard frameworks have built-in ways to compute the noise vectors, such as <a class="reference external" href="https://www.tensorflow.org/api_docs/python/tf/random_normal">tf.random_normal</a>. Alternatively, you can just provide the mean and standard deviation directly to a <a class="reference external" href="https://www.tensorflow.org/api_docs/python/tf/distributions/Normal">tf.distributions.Normal</a> object and use that to sample.</p>
<p><strong>Log-Likelihood.</strong> The log-likelihood of a <img class="math" src="../_images/math/ce641c655353b854e8d2ae836c6f97df9ace9984.svg" alt="k"/> -dimensional action <img class="math" src="../_images/math/045c129c396240f9c4f59bee864337cea3896ef0.svg" alt="a"/>, for a diagonal Gaussian with mean <img class="math" src="../_images/math/d8151ea477dc9219492447408ee17f2e8cb3a4b7.svg" alt="\mu = \mu_{\theta}(s)"/> and standard deviation <img class="math" src="../_images/math/09a783f3fb9e8ed1aef0ca44a810e67d09a52a4f.svg" alt="\sigma = \sigma_{\theta}(s)"/>, is given by</p>
<div class="last math">
<p><img src="../_images/math/003c0eae9ef9660bf067815175ddd51b487c5191.svg" alt="\log \pi_{\theta}(a|s) = -\frac{1}{2}\left(\sum_{i=1}^k \left(\frac{(a_i - \mu_i)^2}{\sigma_i^2} + 2 \log \sigma_i \right) + k \log 2\pi \right)."/></p>
</div></div>
</div>
</div>
<div class="section" id="id12">
<h3>运动轨迹<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h3>
<p>运动轨迹 <img class="math" src="../_images/math/018b60fd9e01bf256b27f2b67a2399df216eb7b2.svg" alt="\tau"/> 指的是状态和行动的序列。</p>
<div class="math">
<p><img src="../_images/math/c93cc4ca90e2a21ee0e4b60c6ee51b422a73b84c.svg" alt="\tau = (s_0, a_0, s_1, a_1, ...)."/></p>
</div><p>第一个状态 <img class="math" src="../_images/math/3dab911480e6ed406b73a47513b25e6f897875e4.svg" alt="s_0"/>，是从 <strong>开始状态分布</strong> 中随机采样的，有时候表示为 <img class="math" src="../_images/math/b9c31eb35f400fd8e50b2d39bfe5698a50b9b6b5.svg" alt="\rho_0"/>:
.. math:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">s_0</span> \<span class="n">sim</span> \<span class="n">rho_0</span><span class="p">(</span>\<span class="n">cdot</span><span class="p">)</span><span class="o">.</span>
</pre></div>
</div>
<p>转态转换（从某一状态时间 <img class="math" src="../_images/math/53e1d388a3a49063e3444d86c79fd887cc3d5b6c.svg" alt="t"/>, <div class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<tt class="docutils">s_t`到另一状态时间 :math:`t+1</tt>)</p>
latex exited with error
[stdout]
This is pdfTeX, Version 3.14159265-2.6-1.40.19 (TeX Live 2018) (preloaded format=latex)
 restricted \write18 enabled.
entering extended mode
(./math.tex
LaTeX2e &lt;2018-04-01&gt; patch level 2
Babel &lt;3.18&gt; and hyphenation patterns for 84 language(s) loaded.
(/usr/local/texlive/2018/texmf-dist/tex/latex/base/article.cls
Document Class: article 2014/09/29 v1.4h Standard LaTeX document class
(/usr/local/texlive/2018/texmf-dist/tex/latex/base/size12.clo))
(/usr/local/texlive/2018/texmf-dist/tex/latex/base/inputenc.sty
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/utf8x.def))
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/ucs.sty
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-global.def))
(/usr/local/texlive/2018/texmf-dist/tex/latex/amsmath/amsmath.sty
For additional information on amsmath, use the `?&#8217; option.
(/usr/local/texlive/2018/texmf-dist/tex/latex/amsmath/amstext.sty
(/usr/local/texlive/2018/texmf-dist/tex/latex/amsmath/amsgen.sty))
(/usr/local/texlive/2018/texmf-dist/tex/latex/amsmath/amsbsy.sty)
(/usr/local/texlive/2018/texmf-dist/tex/latex/amsmath/amsopn.sty))
(/usr/local/texlive/2018/texmf-dist/tex/latex/amscls/amsthm.sty)
(/usr/local/texlive/2018/texmf-dist/tex/latex/amsfonts/amssymb.sty
(/usr/local/texlive/2018/texmf-dist/tex/latex/amsfonts/amsfonts.sty))
(/usr/local/texlive/2018/texmf-dist/tex/latex/anyfontsize/anyfontsize.sty)
(/usr/local/texlive/2018/texmf-dist/tex/latex/tools/bm.sty)
(/usr/local/texlive/2018/texmf-dist/tex/latex/algorithms/algorithm.sty
(/usr/local/texlive/2018/texmf-dist/tex/latex/float/float.sty)
(/usr/local/texlive/2018/texmf-dist/tex/latex/base/ifthen.sty))
(/usr/local/texlive/2018/texmf-dist/tex/latex/algorithms/algorithmic.sty
(/usr/local/texlive/2018/texmf-dist/tex/latex/graphics/keyval.sty))
(/usr/local/texlive/2018/texmf-dist/tex/latex/cancel/cancel.sty)
(/usr/local/texlive/2018/texmf-dist/tex/latex/geometry/geometry.sty
(/usr/local/texlive/2018/texmf-dist/tex/generic/oberdiek/ifpdf.sty)
(/usr/local/texlive/2018/texmf-dist/tex/generic/oberdiek/ifvtex.sty)
(/usr/local/texlive/2018/texmf-dist/tex/generic/ifxetex/ifxetex.sty))

Package geometry Warning: `bmargin&#8217; results in NEGATIVE (-144.54pt).
    `height&#8217; or `tmargin&#8217; should be shortened in length.

(./math.aux) (/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/ucsencs.def)
*geometry* driver: auto-detecting
*geometry* detected driver: dvips
*geometry* verbose mode - [ preamble ] result:
* driver: dvips
* paper: letterpaper
* layout: &lt;same size as paper&gt;
* layoutoffset:(h,v)=(0.0pt,0.0pt)
* modes: 
* h-part:(L,W,R)=(72.27pt, 469.75499pt, 72.27pt)
* v-part:(T,H,B)=(72.26999pt, 867.23999pt, -144.54pt)
* \paperwidth=614.295pt
* \paperheight=794.96999pt
* \textwidth=469.75499pt
* \textheight=867.23999pt
* \oddsidemargin=0.00002pt
* \evensidemargin=0.00002pt
* \topmargin=-37.0pt
* \headheight=12.0pt
* \headsep=25.0pt
* \topskip=12.0pt
* \footskip=30.0pt
* \marginparwidth=44.0pt
* \marginparsep=10.0pt
* \columnsep=10.0pt
* \skip\footins=10.8pt plus 4.0pt minus 2.0pt
* \hoffset=0.0pt
* \voffset=0.0pt
* \mag=1000
* \&#64;twocolumnfalse
* \&#64;twosidefalse
* \&#64;mparswitchfalse
* \&#64;reversemarginfalse
* (1in=72.27pt=25.4mm, 1cm=28.453pt)

(/usr/local/texlive/2018/texmf-dist/tex/latex/amsfonts/umsa.fd)
(/usr/local/texlive/2018/texmf-dist/tex/latex/amsfonts/umsb.fd)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-82.def)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-82.def)

! Package ucs Error: Unknown Unicode character 21040 = U+5230,
(ucs)                possibly declared in uni-82.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 \fontsize{14}{17}\selectfont $s_t`到
                                          另一状态时间 :math:`t+1$
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-83.def)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-83.def)

! Package ucs Error: Unknown Unicode character 21478 = U+53E6,
(ucs)                possibly declared in uni-83.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 \fontsize{14}{17}\selectfont $s_t`到另
                                             一状态时间 :math:`t+1$
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-78.def)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-78.def)

! Package ucs Error: Unknown Unicode character 19968 = U+4E00,
(ucs)                possibly declared in uni-78.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 \fontsize{14}{17}\selectfont $s_t`到另一
                                                状态时间 :math:`t+1$
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-114.def)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-114.def)

! Package ucs Error: Unknown Unicode character 29366 = U+72B6,
(ucs)                possibly declared in uni-114.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 ...tsize{14}{17}\selectfont $s_t`到另一状
                                                  态时间 :math:`t+1$
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-96.def)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-96.def)

! Package ucs Error: Unknown Unicode character 24577 = U+6001,
(ucs)                possibly declared in uni-96.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 ...ze{14}{17}\selectfont $s_t`到另一状态
                                                  时间 :math:`t+1$
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-101.def)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-101.def)

! Package ucs Error: Unknown Unicode character 26102 = U+65F6,
(ucs)                possibly declared in uni-101.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 ...14}{17}\selectfont $s_t`到另一状态时
                                                  间 :math:`t+1$
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-149.def)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-149.def)

! Package ucs Error: Unknown Unicode character 38388 = U+95F4,
(ucs)                possibly declared in uni-149.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 ...{17}\selectfont $s_t`到另一状态时间
                                                   :math:`t+1$

Overfull \hbox (16.91689pt too wide) in paragraph at lines 33&#8211;34
[]$\OML/cmm/m/it/14.4 s[]\OT1/cmr/m/n/14.4 `[][][][][][][][][][][][][][] : \OML
/cmm/m/it/14.4 math \OT1/cmr/m/n/14.4 :
[1] (./math.aux) )
(see the transcript file for additional information)
Output written on math.dvi (1 page, 560 bytes).
Transcript written on math.log.
</div>
, <img class="math" src="../_images/math/eddbb0a5b1f95b8e4a2d25b156ec0f61c24dfe41.svg" alt="s_{t+1}"/> 会发生什么），是由环境的自然法则确定的，并且只依赖于最近的行动 <img class="math" src="../_images/math/8ddb1f258c0be380f1821db82450a8c1ed8bf138.svg" alt="a_t"/>。它们可以是确定性的：</p>
<div class="math">
<p><img src="../_images/math/5c77b8a5172ba1b6812a2f190eb1d9a4388b16b9.svg" alt="s_{t+1} = f(s_t, a_t)"/></p>
</div><p>而可以是随机的：</p>
<div class="math">
<p><img src="../_images/math/ab9d75a3d467228b0b7cba14c4c6368c7b58f546.svg" alt="s_{t+1} \sim P(\cdot|s_t, a_t)."/></p>
</div><p>智能体的行为由策略确定。</p>
<div class="admonition- admonition">
<p class="first admonition-title">你应该知道</p>
<p class="last">行动轨迹常常也被称作 <strong>episodes</strong> 或者 <strong>rollouts</strong>。</p>
</div>
</div>
<div class="section" id="id13">
<h3>奖励和返回<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h3>
<p>奖励函数在强化学习中非常重要。它依赖于这个世界的状态，已经做出的行动，以及世界下一步的行动。</p>
<div class="math">
<p><img src="../_images/math/b298a591c3c7a428a5b98fe92279b5b8d1b8eb96.svg" alt="r_t = R(s_t, a_t, s_{t+1})"/></p>
</div><p>有时候这个公式会被改成只依赖于当前的状态 <img class="math" src="../_images/math/b59b3980c45941c21ab5da6fb9f921dd2d669d5f.svg" alt="r_t = R(s_t)"/>，或者状态和行动对 <img class="math" src="../_images/math/2c5b7830b53ea578c05512cd80de5749f045a237.svg" alt="r_t = R(s_t,a_t)"/>。</p>
<p>智能体的目标是最大化行动轨迹的累计奖励，这意味着很多事情。我们会把所有的情况表示为 <img class="math" src="../_images/math/27905cd8b349a89eec129f7e3ac3d3ac4c82e501.svg" alt="R(\tau)"/>，要么可以很清楚的从上下文看出来，要么就不重要。（因为相同的方程式适用于所有情况。）</p>
<p><strong>有限无衰减收益</strong>，指的是在一个固定窗口步数内获得的累计奖励：</p>
<div class="math">
<p><img src="../_images/math/ce20ca1d911ea7b3b9161000c52ed750ec75cc14.svg" alt="R(\tau) = \sum_{t=0}^T r_t."/></p>
</div><p>另一种叫做 <strong>无限衰减收益</strong>，指的是智能体获得的全部奖励之和，但是奖励会因为获得的时间不同而打折（乘上一个系数）。这个公式包含一个衰减率 <img class="math" src="../_images/math/202f89dbc5e387cec1af4cf1be6e6c87bbd8304e.svg" alt="\gamma \in (0,1)"/>:</p>
<div class="math">
<p><img src="../_images/math/196d139b5647c5a777ebe6ddfce278f8b0736156.svg" alt="R(\tau) = \sum_{t=0}^{\infty} \gamma^t r_t."/></p>
</div><p>这里为什么要加上一个衰减率呢？为什么不直接把所有的奖励加在一起？可以从两个角度来解释： 直观上讲，现在的奖励比外来的奖励要好，所以未来的奖励会打折；数学角度上，无限多个奖励的和很可能 <a class="reference external" href="https://en.wikipedia.org/wiki/Convergent_series">不收敛</a> ，有了这个衰减率和适当的约束条件，数值就会收敛。</p>
<div class="admonition- admonition">
<p class="first admonition-title">你应该知道</p>
<p class="last">尽管这两种收益的公式看起来差距很明显，但在深度强化学习中我们经常会混用。比如说，我们经常会用算法优化无折扣的收益，但是用衰减率估算 <strong>值函数</strong>。</p>
</div>
</div>
<div class="section" id="id15">
<h3>强化学习问题<a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h3>
<p><strong>expected return</strong> when the agent acts according to it.
无论选择哪种方式衡量收益（有限无折扣或无限折扣），无论选择哪种策略，强化学习的目标都是选择一种策略获得智能体的最大化 <strong>预期收益</strong>。</p>
<p>讨论预期收益之前，我们先探探行动轨迹的可能性分布。</p>
<p>我们假设环境转换和策略都是随机的。这种情况下， <img class="math" src="../_images/math/813bf97f00fe14c6142e061de00769d99ccddf0e.svg" alt="T"/> -步 行动轨迹是：</p>
<div class="math">
<p><img src="../_images/math/06c47618f62ff44b438c4901b69bb44cba239153.svg" alt="P(\tau|\pi) = \rho_0 (s_0) \prod_{t=0}^{T-1} P(s_{t+1} | s_t, a_t) \pi(a_t | s_t)."/></p>
</div><p>预期收益是 <img class="math" src="../_images/math/e44ba0152f26f27382a11a95f24c132f0d3410a2.svg" alt="J(\pi)"/></p>
<div class="math">
<p><img src="../_images/math/cf40a268eae7267d76231420eaf1e143eb870fdc.svg" alt="J(\pi) = \int_{\tau} P(\tau|\pi) R(\tau) = \underE{\tau\sim \pi}{R(\tau)}."/></p>
</div><p>强化学习中的核心优化问题可以表示为：</p>
<div class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<tt class="docutils">   \pi^* = \arg \max_{\pi} J(\pi),

:math:`\pi^*` 是 **最优策略**</tt>)</p>
latex exited with error
[stdout]
This is pdfTeX, Version 3.14159265-2.6-1.40.19 (TeX Live 2018) (preloaded format=latex)
 restricted \write18 enabled.
entering extended mode
(./math.tex
LaTeX2e &lt;2018-04-01&gt; patch level 2
Babel &lt;3.18&gt; and hyphenation patterns for 84 language(s) loaded.
(/usr/local/texlive/2018/texmf-dist/tex/latex/base/article.cls
Document Class: article 2014/09/29 v1.4h Standard LaTeX document class
(/usr/local/texlive/2018/texmf-dist/tex/latex/base/size12.clo))
(/usr/local/texlive/2018/texmf-dist/tex/latex/base/inputenc.sty
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/utf8x.def))
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/ucs.sty
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-global.def))
(/usr/local/texlive/2018/texmf-dist/tex/latex/amsmath/amsmath.sty
For additional information on amsmath, use the `?&#8217; option.
(/usr/local/texlive/2018/texmf-dist/tex/latex/amsmath/amstext.sty
(/usr/local/texlive/2018/texmf-dist/tex/latex/amsmath/amsgen.sty))
(/usr/local/texlive/2018/texmf-dist/tex/latex/amsmath/amsbsy.sty)
(/usr/local/texlive/2018/texmf-dist/tex/latex/amsmath/amsopn.sty))
(/usr/local/texlive/2018/texmf-dist/tex/latex/amscls/amsthm.sty)
(/usr/local/texlive/2018/texmf-dist/tex/latex/amsfonts/amssymb.sty
(/usr/local/texlive/2018/texmf-dist/tex/latex/amsfonts/amsfonts.sty))
(/usr/local/texlive/2018/texmf-dist/tex/latex/anyfontsize/anyfontsize.sty)
(/usr/local/texlive/2018/texmf-dist/tex/latex/tools/bm.sty)
(/usr/local/texlive/2018/texmf-dist/tex/latex/algorithms/algorithm.sty
(/usr/local/texlive/2018/texmf-dist/tex/latex/float/float.sty)
(/usr/local/texlive/2018/texmf-dist/tex/latex/base/ifthen.sty))
(/usr/local/texlive/2018/texmf-dist/tex/latex/algorithms/algorithmic.sty
(/usr/local/texlive/2018/texmf-dist/tex/latex/graphics/keyval.sty))
(/usr/local/texlive/2018/texmf-dist/tex/latex/cancel/cancel.sty)
(/usr/local/texlive/2018/texmf-dist/tex/latex/geometry/geometry.sty
(/usr/local/texlive/2018/texmf-dist/tex/generic/oberdiek/ifpdf.sty)
(/usr/local/texlive/2018/texmf-dist/tex/generic/oberdiek/ifvtex.sty)
(/usr/local/texlive/2018/texmf-dist/tex/generic/ifxetex/ifxetex.sty))

Package geometry Warning: `bmargin&#8217; results in NEGATIVE (-144.54pt).
    `height&#8217; or `tmargin&#8217; should be shortened in length.

(./math.aux) (/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/ucsencs.def)
*geometry* driver: auto-detecting
*geometry* detected driver: dvips
*geometry* verbose mode - [ preamble ] result:
* driver: dvips
* paper: letterpaper
* layout: &lt;same size as paper&gt;
* layoutoffset:(h,v)=(0.0pt,0.0pt)
* modes: 
* h-part:(L,W,R)=(72.27pt, 469.75499pt, 72.27pt)
* v-part:(T,H,B)=(72.26999pt, 867.23999pt, -144.54pt)
* \paperwidth=614.295pt
* \paperheight=794.96999pt
* \textwidth=469.75499pt
* \textheight=867.23999pt
* \oddsidemargin=0.00002pt
* \evensidemargin=0.00002pt
* \topmargin=-37.0pt
* \headheight=12.0pt
* \headsep=25.0pt
* \topskip=12.0pt
* \footskip=30.0pt
* \marginparwidth=44.0pt
* \marginparsep=10.0pt
* \columnsep=10.0pt
* \skip\footins=10.8pt plus 4.0pt minus 2.0pt
* \hoffset=0.0pt
* \voffset=0.0pt
* \mag=1000
* \&#64;twocolumnfalse
* \&#64;twosidefalse
* \&#64;mparswitchfalse
* \&#64;reversemarginfalse
* (1in=72.27pt=25.4mm, 1cm=28.453pt)

(/usr/local/texlive/2018/texmf-dist/tex/latex/amsfonts/umsa.fd)
(/usr/local/texlive/2018/texmf-dist/tex/latex/amsfonts/umsb.fd)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-102.def)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-102.def)

! Package ucs Error: Unknown Unicode character 26159 = U+662F,
(ucs)                possibly declared in uni-102.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.36 \end{aligned}\end{align*}
                              
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-103.def)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-103.def)

! Package ucs Error: Unknown Unicode character 26368 = U+6700,
(ucs)                possibly declared in uni-103.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.36 \end{aligned}\end{align*}
                              
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-79.def)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-79.def)

! Package ucs Error: Unknown Unicode character 20248 = U+4F18,
(ucs)                possibly declared in uni-79.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.36 \end{aligned}\end{align*}
                              
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-123.def)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-123.def)

! Package ucs Error: Unknown Unicode character 31574 = U+7B56,
(ucs)                possibly declared in uni-123.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.36 \end{aligned}\end{align*}
                              
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-117.def)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-117.def)

! Package ucs Error: Unknown Unicode character 30053 = U+7565,
(ucs)                possibly declared in uni-117.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.36 \end{aligned}\end{align*}
                              

Package ucs Warning: Unknown character 26159 = 0x662F appeared again. on input 
line 36.


Package ucs Warning: Unknown character 26368 = 0x6700 appeared again. on input 
line 36.


Package ucs Warning: Unknown character 20248 = 0x4F18 appeared again. on input 
line 36.


Package ucs Warning: Unknown character 31574 = 0x7B56 appeared again. on input 
line 36.


Package ucs Warning: Unknown character 30053 = 0x7565 appeared again. on input 
line 36.

[1] (./math.aux) )
(see the transcript file for additional information)
Output written on math.dvi (1 page, 704 bytes).
Transcript written on math.log.
</div>
</div>
<div class="section" id="id16">
<h3>值函数<a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h3>
<p>知道一个状态的值或者状态行动对(state-action pair)很有用。这里的值指的是，如果你从某一个状态或者状态行动对开始，一直按照某个策略运行下去最终获得的期望回报。 <strong>值函数</strong> 几乎被用在每一个强化学习的方法中。</p>
<p>这里介绍四种函数：</p>
<dl class="docutils">
<dt>1.同策略值函数： <img class="math" src="../_images/math/3c343749cc2f7804a670b618d03d056d7e35b5eb.svg" alt="V^{\pi}(s)"/>，从某一个状态 <img class="math" src="../_images/math/2f2cb3307c5fd6504354c54022ea6e82c9629309.svg" alt="s"/> 开始，之后每一步都按照策略 <img class="math" src="../_images/math/b8a498bfdeca84b973d6222e08a6d04321d65dc3.svg" alt="\pi"/> 执行</dt>
<dd><div class="first last math">
<p><img src="../_images/math/f31d6113b295f2a1547b4dbef3f172bf8731070b.svg" alt="V^{\pi}(s) = \underE{\tau \sim \pi}{R(\tau)\left| s_0 = s\right.}"/></p>
</div></dd>
</dl>
<p>2.同策略行动-值函数： <img class="math" src="../_images/math/be616d6b2f96aeb2f5c3321d153a30589c80004f.svg" alt="Q^{\pi}(s,a)"/>,从某一个状态 <img class="math" src="../_images/math/2f2cb3307c5fd6504354c54022ea6e82c9629309.svg" alt="s"/> 开始，先随便执行一个行动 <img class="math" src="../_images/math/045c129c396240f9c4f59bee864337cea3896ef0.svg" alt="a"/> （有可能不是按照策略走的），之后每一步都按照固定的策略执行 <img class="math" src="../_images/math/b8a498bfdeca84b973d6222e08a6d04321d65dc3.svg" alt="\pi"/></p>
<blockquote>
<div><div class="math">
<p><img src="../_images/math/350596a2cc2f9338f114972639f0d88a77f4b942.svg" alt="Q^{\pi}(s,a) = \underE{\tau \sim \pi}{R(\tau)\left| s_0 = s, a_0 = a\right.}"/></p>
</div></div></blockquote>
<ol class="arabic" start="3">
<li><p class="first">最优值函数： <img class="math" src="../_images/math/3aa5fd189ef621bb055e7064dfc5ee24099bc95a.svg" alt="V^*(s)"/>，从某一个状态 <img class="math" src="../_images/math/2f2cb3307c5fd6504354c54022ea6e82c9629309.svg" alt="s"/> 开始，之后每一步走执行 <em>最优策略</em> 策略 <img class="math" src="../_images/math/b8a498bfdeca84b973d6222e08a6d04321d65dc3.svg" alt="\pi"/></p>
<blockquote>
<div><div class="math">
<p><img src="../_images/math/bea57d358e59dfc6c11d00961ae55506c0ab0fe8.svg" alt="V^*(s) = \max_{\pi} \underE{\tau \sim \pi}{R(\tau)\left| s_0 = s\right.}"/></p>
</div></div></blockquote>
</li>
<li><p class="first">最优行动-值函数： <img class="math" src="../_images/math/3a641ac6d7de30796ff8c186c31692dd609123a0.svg" alt="Q^*(s,a)"/> ，从某一个状态 <img class="math" src="../_images/math/2f2cb3307c5fd6504354c54022ea6e82c9629309.svg" alt="s"/> 开始，先随便执行一个行动 <img class="math" src="../_images/math/045c129c396240f9c4f59bee864337cea3896ef0.svg" alt="a"/> （有可能不是按照策略走的），之后每一步都按照 <em>最优策略</em> 执行 <img class="math" src="../_images/math/b8a498bfdeca84b973d6222e08a6d04321d65dc3.svg" alt="\pi"/></p>
<div class="math">
<p><img src="../_images/math/322f38074bc53060ff4a39d0abb046e77bf77aae.svg" alt="Q^*(s,a) = \max_{\pi} \underE{\tau \sim \pi}{R(\tau)\left| s_0 = s, a_0 = a\right.}"/></p>
</div></li>
</ol>
<div class="admonition- admonition">
<p class="first admonition-title">你应该知道</p>
<p class="last">当我们讨论值函数的时候，如果我们没有特指依赖时间，那就意味着 <strong>无限折扣收益</strong>。 有限无折扣收益需要传入时间作为参数，你知道为什么吗？ 提示：时间到了会发生什么？</p>
</div>
<div class="admonition- admonition">
<p class="first admonition-title">你应该知道</p>
<p>值函数和行动-值函数两者之间经常出现的联系：</p>
<div class="math">
<p><img src="../_images/math/b2d90201f072965337bacb822b17d8f2e9791165.svg" alt="V^{\pi}(s) = \underE{a\sim \pi}{Q^{\pi}(s,a)},"/></p>
</div><p>以及：</p>
<div class="math">
<p><img src="../_images/math/45dfe72ba680d985e158c2fef08ddfbb9c5f57a6.svg" alt="V^*(s) = \max_a Q^* (s,a)."/></p>
</div><p class="last">这些关系直接来自刚刚给出的定义，你能尝试证明吗？</p>
</div>
</div>
<div class="section" id="q">
<h3>最优Q函数和最优行动<a class="headerlink" href="#q" title="Permalink to this headline">¶</a></h3>
<p>最优行动-值函数 <img class="math" src="../_images/math/3a641ac6d7de30796ff8c186c31692dd609123a0.svg" alt="Q^*(s,a)"/> 和被最优策略选中的行动有重要的联系。从定义上讲， <img class="math" src="../_images/math/3a641ac6d7de30796ff8c186c31692dd609123a0.svg" alt="Q^*(s,a)"/> 指的是从一个状态 <div class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<tt class="docutils">s`开始，任意执行一个行动 :math:`a</tt>)</p>
latex exited with error
[stdout]
This is pdfTeX, Version 3.14159265-2.6-1.40.19 (TeX Live 2018) (preloaded format=latex)
 restricted \write18 enabled.
entering extended mode
(./math.tex
LaTeX2e &lt;2018-04-01&gt; patch level 2
Babel &lt;3.18&gt; and hyphenation patterns for 84 language(s) loaded.
(/usr/local/texlive/2018/texmf-dist/tex/latex/base/article.cls
Document Class: article 2014/09/29 v1.4h Standard LaTeX document class
(/usr/local/texlive/2018/texmf-dist/tex/latex/base/size12.clo))
(/usr/local/texlive/2018/texmf-dist/tex/latex/base/inputenc.sty
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/utf8x.def))
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/ucs.sty
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-global.def))
(/usr/local/texlive/2018/texmf-dist/tex/latex/amsmath/amsmath.sty
For additional information on amsmath, use the `?&#8217; option.
(/usr/local/texlive/2018/texmf-dist/tex/latex/amsmath/amstext.sty
(/usr/local/texlive/2018/texmf-dist/tex/latex/amsmath/amsgen.sty))
(/usr/local/texlive/2018/texmf-dist/tex/latex/amsmath/amsbsy.sty)
(/usr/local/texlive/2018/texmf-dist/tex/latex/amsmath/amsopn.sty))
(/usr/local/texlive/2018/texmf-dist/tex/latex/amscls/amsthm.sty)
(/usr/local/texlive/2018/texmf-dist/tex/latex/amsfonts/amssymb.sty
(/usr/local/texlive/2018/texmf-dist/tex/latex/amsfonts/amsfonts.sty))
(/usr/local/texlive/2018/texmf-dist/tex/latex/anyfontsize/anyfontsize.sty)
(/usr/local/texlive/2018/texmf-dist/tex/latex/tools/bm.sty)
(/usr/local/texlive/2018/texmf-dist/tex/latex/algorithms/algorithm.sty
(/usr/local/texlive/2018/texmf-dist/tex/latex/float/float.sty)
(/usr/local/texlive/2018/texmf-dist/tex/latex/base/ifthen.sty))
(/usr/local/texlive/2018/texmf-dist/tex/latex/algorithms/algorithmic.sty
(/usr/local/texlive/2018/texmf-dist/tex/latex/graphics/keyval.sty))
(/usr/local/texlive/2018/texmf-dist/tex/latex/cancel/cancel.sty)
(/usr/local/texlive/2018/texmf-dist/tex/latex/geometry/geometry.sty
(/usr/local/texlive/2018/texmf-dist/tex/generic/oberdiek/ifpdf.sty)
(/usr/local/texlive/2018/texmf-dist/tex/generic/oberdiek/ifvtex.sty)
(/usr/local/texlive/2018/texmf-dist/tex/generic/ifxetex/ifxetex.sty))

Package geometry Warning: `bmargin&#8217; results in NEGATIVE (-144.54pt).
    `height&#8217; or `tmargin&#8217; should be shortened in length.

(./math.aux) (/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/ucsencs.def)
*geometry* driver: auto-detecting
*geometry* detected driver: dvips
*geometry* verbose mode - [ preamble ] result:
* driver: dvips
* paper: letterpaper
* layout: &lt;same size as paper&gt;
* layoutoffset:(h,v)=(0.0pt,0.0pt)
* modes: 
* h-part:(L,W,R)=(72.27pt, 469.75499pt, 72.27pt)
* v-part:(T,H,B)=(72.26999pt, 867.23999pt, -144.54pt)
* \paperwidth=614.295pt
* \paperheight=794.96999pt
* \textwidth=469.75499pt
* \textheight=867.23999pt
* \oddsidemargin=0.00002pt
* \evensidemargin=0.00002pt
* \topmargin=-37.0pt
* \headheight=12.0pt
* \headsep=25.0pt
* \topskip=12.0pt
* \footskip=30.0pt
* \marginparwidth=44.0pt
* \marginparsep=10.0pt
* \columnsep=10.0pt
* \skip\footins=10.8pt plus 4.0pt minus 2.0pt
* \hoffset=0.0pt
* \voffset=0.0pt
* \mag=1000
* \&#64;twocolumnfalse
* \&#64;twosidefalse
* \&#64;mparswitchfalse
* \&#64;reversemarginfalse
* (1in=72.27pt=25.4mm, 1cm=28.453pt)

(/usr/local/texlive/2018/texmf-dist/tex/latex/amsfonts/umsa.fd)
(/usr/local/texlive/2018/texmf-dist/tex/latex/amsfonts/umsb.fd)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-95.def)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-95.def)

! Package ucs Error: Unknown Unicode character 24320 = U+5F00,
(ucs)                possibly declared in uni-95.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 \fontsize{14}{17}\selectfont $s`开
                                        始，任意执行一个行动 :math...

(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-89.def)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-89.def)

! Package ucs Error: Unknown Unicode character 22987 = U+59CB,
(ucs)                possibly declared in uni-89.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 \fontsize{14}{17}\selectfont $s`开始
                                           ，任意执行一个行动 :math...

(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-255.def)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-255.def)

! Package ucs Error: Unknown Unicode character 65292 = U+FF0C,
(ucs)                possibly declared in uni-255.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 \fontsize{14}{17}\selectfont $s`开始，
                                              任意执行一个行动 :math...

(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-78.def)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-78.def)

! Package ucs Error: Unknown Unicode character 20219 = U+4EFB,
(ucs)                possibly declared in uni-78.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 \fontsize{14}{17}\selectfont $s`开始，任
                                                 意执行一个行动 :math...

(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-97.def)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-97.def)

! Package ucs Error: Unknown Unicode character 24847 = U+610F,
(ucs)                possibly declared in uni-97.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 ...size{14}{17}\selectfont $s`开始，任意
                                                  执行一个行动 :math:`a$
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-98.def)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-98.def)

! Package ucs Error: Unknown Unicode character 25191 = U+6267,
(ucs)                possibly declared in uni-98.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 ...e{14}{17}\selectfont $s`开始，任意执
                                                  行一个行动 :math:`a$
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-136.def)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-136.def)

! Package ucs Error: Unknown Unicode character 34892 = U+884C,
(ucs)                possibly declared in uni-136.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 ...4}{17}\selectfont $s`开始，任意执行
                                                  一个行动 :math:`a$
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-78.def)

! Package ucs Error: Unknown Unicode character 19968 = U+4E00,
(ucs)                possibly declared in uni-78.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 ...17}\selectfont $s`开始，任意执行一
                                                  个行动 :math:`a$
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-78.def)

! Package ucs Error: Unknown Unicode character 20010 = U+4E2A,
(ucs)                possibly declared in uni-78.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 ...\selectfont $s`开始，任意执行一个
                                                  行动 :math:`a$

Package ucs Warning: Unknown character 34892 = 0x884C appeared again. on input 
line 33.

(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-82.def)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-82.def)

! Package ucs Error: Unknown Unicode character 21160 = U+52A8,
(ucs)                possibly declared in uni-82.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 ...tfont $s`开始，任意执行一个行动
                                                   :math:`a$

Overfull \hbox (199.79778pt too wide) in paragraph at lines 33&#8211;34
[]$\OML/cmm/m/it/14.4 s\OT1/cmr/m/n/14.4 `[][][][][][][][][][][][][][][][][][][
][][][] :
[1] (./math.aux) )
(see the transcript file for additional information)
Output written on math.dvi (1 page, 580 bytes).
Transcript written on math.log.
</div>
，然后一直按照最优策略执行下去所获得的回报。</p>
<p>最优策略 <div class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<tt class="docutils">s`会选择从状态 :math:`s`开始选择能够最大化期望回报的行动。所以如果我们有了 :math:`Q^*</tt>)</p>
latex exited with error
[stdout]
This is pdfTeX, Version 3.14159265-2.6-1.40.19 (TeX Live 2018) (preloaded format=latex)
 restricted \write18 enabled.
entering extended mode
(./math.tex
LaTeX2e &lt;2018-04-01&gt; patch level 2
Babel &lt;3.18&gt; and hyphenation patterns for 84 language(s) loaded.
(/usr/local/texlive/2018/texmf-dist/tex/latex/base/article.cls
Document Class: article 2014/09/29 v1.4h Standard LaTeX document class
(/usr/local/texlive/2018/texmf-dist/tex/latex/base/size12.clo))
(/usr/local/texlive/2018/texmf-dist/tex/latex/base/inputenc.sty
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/utf8x.def))
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/ucs.sty
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-global.def))
(/usr/local/texlive/2018/texmf-dist/tex/latex/amsmath/amsmath.sty
For additional information on amsmath, use the `?&#8217; option.
(/usr/local/texlive/2018/texmf-dist/tex/latex/amsmath/amstext.sty
(/usr/local/texlive/2018/texmf-dist/tex/latex/amsmath/amsgen.sty))
(/usr/local/texlive/2018/texmf-dist/tex/latex/amsmath/amsbsy.sty)
(/usr/local/texlive/2018/texmf-dist/tex/latex/amsmath/amsopn.sty))
(/usr/local/texlive/2018/texmf-dist/tex/latex/amscls/amsthm.sty)
(/usr/local/texlive/2018/texmf-dist/tex/latex/amsfonts/amssymb.sty
(/usr/local/texlive/2018/texmf-dist/tex/latex/amsfonts/amsfonts.sty))
(/usr/local/texlive/2018/texmf-dist/tex/latex/anyfontsize/anyfontsize.sty)
(/usr/local/texlive/2018/texmf-dist/tex/latex/tools/bm.sty)
(/usr/local/texlive/2018/texmf-dist/tex/latex/algorithms/algorithm.sty
(/usr/local/texlive/2018/texmf-dist/tex/latex/float/float.sty)
(/usr/local/texlive/2018/texmf-dist/tex/latex/base/ifthen.sty))
(/usr/local/texlive/2018/texmf-dist/tex/latex/algorithms/algorithmic.sty
(/usr/local/texlive/2018/texmf-dist/tex/latex/graphics/keyval.sty))
(/usr/local/texlive/2018/texmf-dist/tex/latex/cancel/cancel.sty)
(/usr/local/texlive/2018/texmf-dist/tex/latex/geometry/geometry.sty
(/usr/local/texlive/2018/texmf-dist/tex/generic/oberdiek/ifpdf.sty)
(/usr/local/texlive/2018/texmf-dist/tex/generic/oberdiek/ifvtex.sty)
(/usr/local/texlive/2018/texmf-dist/tex/generic/ifxetex/ifxetex.sty))

Package geometry Warning: `bmargin&#8217; results in NEGATIVE (-144.54pt).
    `height&#8217; or `tmargin&#8217; should be shortened in length.

(./math.aux) (/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/ucsencs.def)
*geometry* driver: auto-detecting
*geometry* detected driver: dvips
*geometry* verbose mode - [ preamble ] result:
* driver: dvips
* paper: letterpaper
* layout: &lt;same size as paper&gt;
* layoutoffset:(h,v)=(0.0pt,0.0pt)
* modes: 
* h-part:(L,W,R)=(72.27pt, 469.75499pt, 72.27pt)
* v-part:(T,H,B)=(72.26999pt, 867.23999pt, -144.54pt)
* \paperwidth=614.295pt
* \paperheight=794.96999pt
* \textwidth=469.75499pt
* \textheight=867.23999pt
* \oddsidemargin=0.00002pt
* \evensidemargin=0.00002pt
* \topmargin=-37.0pt
* \headheight=12.0pt
* \headsep=25.0pt
* \topskip=12.0pt
* \footskip=30.0pt
* \marginparwidth=44.0pt
* \marginparsep=10.0pt
* \columnsep=10.0pt
* \skip\footins=10.8pt plus 4.0pt minus 2.0pt
* \hoffset=0.0pt
* \voffset=0.0pt
* \mag=1000
* \&#64;twocolumnfalse
* \&#64;twosidefalse
* \&#64;mparswitchfalse
* \&#64;reversemarginfalse
* (1in=72.27pt=25.4mm, 1cm=28.453pt)

(/usr/local/texlive/2018/texmf-dist/tex/latex/amsfonts/umsa.fd)
(/usr/local/texlive/2018/texmf-dist/tex/latex/amsfonts/umsb.fd)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-79.def)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-79.def)

! Package ucs Error: Unknown Unicode character 20250 = U+4F1A,
(ucs)                possibly declared in uni-79.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 \fontsize{14}{17}\selectfont $s`会
                                        选择从状态 :math:`s`开始选�...

(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-144.def)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-144.def)

! Package ucs Error: Unknown Unicode character 36873 = U+9009,
(ucs)                possibly declared in uni-144.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 \fontsize{14}{17}\selectfont $s`会选
                                           择从状态 :math:`s`开始选�...

(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-98.def)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-98.def)

! Package ucs Error: Unknown Unicode character 25321 = U+62E9,
(ucs)                possibly declared in uni-98.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 \fontsize{14}{17}\selectfont $s`会选择
                                              从状态 :math:`s`开始选�...

(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-78.def)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-78.def)

! Package ucs Error: Unknown Unicode character 20174 = U+4ECE,
(ucs)                possibly declared in uni-78.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 \fontsize{14}{17}\selectfont $s`会选择从
                                                 状态 :math:`s`开始选�...

(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-114.def)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-114.def)

! Package ucs Error: Unknown Unicode character 29366 = U+72B6,
(ucs)                possibly declared in uni-114.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 ...size{14}{17}\selectfont $s`会选择从状
                                                  态 :math:`s`开始选择�...

(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-96.def)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-96.def)

! Package ucs Error: Unknown Unicode character 24577 = U+6001,
(ucs)                possibly declared in uni-96.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 ...e{14}{17}\selectfont $s`会选择从状态
                                                   :math:`s`开始选择能�...

(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-95.def)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-95.def)

! Package ucs Error: Unknown Unicode character 24320 = U+5F00,
(ucs)                possibly declared in uni-95.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 ...ectfont $s`会选择从状态 :math:`s`开
                                                  始选择能够最大化�...

(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-89.def)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-89.def)

! Package ucs Error: Unknown Unicode character 22987 = U+59CB,
(ucs)                possibly declared in uni-89.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 ...font $s`会选择从状态 :math:`s`开始
                                                  选择能够最大化期�...


Package ucs Warning: Unknown character 36873 = 0x9009 appeared again. on input 
line 33.


Package ucs Warning: Unknown character 25321 = 0x62E9 appeared again. on input 
line 33.

(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-128.def)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-128.def)

! Package ucs Error: Unknown Unicode character 33021 = U+80FD,
(ucs)                possibly declared in uni-128.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 ...��选择从状态 :math:`s`开始选择能
                                                  够最大化期望回报�...

(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-89.def)

! Package ucs Error: Unknown Unicode character 22815 = U+591F,
(ucs)                possibly declared in uni-89.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 ...��择从状态 :math:`s`开始选择能够
                                                  最大化期望回报的�...

(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-103.def)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-103.def)

! Package ucs Error: Unknown Unicode character 26368 = U+6700,
(ucs)                possibly declared in uni-103.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 ...��从状态 :math:`s`开始选择能够最
                                                  大化期望回报的行�...

(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-89.def)

! Package ucs Error: Unknown Unicode character 22823 = U+5927,
(ucs)                possibly declared in uni-89.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 ...��状态 :math:`s`开始选择能够最大
                                                  化期望回报的行动�...

(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-83.def)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-83.def)

! Package ucs Error: Unknown Unicode character 21270 = U+5316,
(ucs)                possibly declared in uni-83.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 ...��态 :math:`s`开始选择能够最大化
                                                  期望回报的行动。�...

(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-103.def)

! Package ucs Error: Unknown Unicode character 26399 = U+671F,
(ucs)                possibly declared in uni-103.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 ...�� :math:`s`开始选择能够最大化期
                                                  望回报的行动。所�...

(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-103.def)

! Package ucs Error: Unknown Unicode character 26395 = U+671B,
(ucs)                possibly declared in uni-103.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 ...:math:`s`开始选择能够最大化期望
                                                  回报的行动。所以�...

(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-86.def)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-86.def)

! Package ucs Error: Unknown Unicode character 22238 = U+56DE,
(ucs)                possibly declared in uni-86.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 ...th:`s`开始选择能够最大化期望回
                                                  报的行动。所以如�...

(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-98.def)

! Package ucs Error: Unknown Unicode character 25253 = U+62A5,
(ucs)                possibly declared in uni-98.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 ...`s`开始选择能够最大化期望回报
                                                  的行动。所以如果�...

(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-118.def)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-118.def)

! Package ucs Error: Unknown Unicode character 30340 = U+7684,
(ucs)                possibly declared in uni-118.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 ...开始选择能够最大化期望回报的
                                                  行动。所以如果我�...

(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-136.def)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-136.def)

! Package ucs Error: Unknown Unicode character 34892 = U+884C,
(ucs)                possibly declared in uni-136.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 ...始选择能够最大化期望回报的行
                                                  动。所以如果我们�...

(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-82.def)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-82.def)

! Package ucs Error: Unknown Unicode character 21160 = U+52A8,
(ucs)                possibly declared in uni-82.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 ...选择能够最大化期望回报的行动
                                                  。所以如果我们有�...

(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-48.def)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-48.def)

! Package ucs Error: Unknown Unicode character 12290 = U+3002,
(ucs)                possibly declared in uni-48.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 ...择能够最大化期望回报的行动。
                                                  所以如果我们有了 :...

(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-98.def)

! Package ucs Error: Unknown Unicode character 25152 = U+6240,
(ucs)                possibly declared in uni-98.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 ...能够最大化期望回报的行动。所
                                                  以如果我们有了 :mat...

(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-78.def)

! Package ucs Error: Unknown Unicode character 20197 = U+4EE5,
(ucs)                possibly declared in uni-78.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 ...够最大化期望回报的行动。所以
                                                  如果我们有了 :math:`...

(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-89.def)

! Package ucs Error: Unknown Unicode character 22914 = U+5982,
(ucs)                possibly declared in uni-89.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 ...最大化期望回报的行动。所以如
                                                  果我们有了 :math:`Q^*$
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-103.def)

! Package ucs Error: Unknown Unicode character 26524 = U+679C,
(ucs)                possibly declared in uni-103.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 ...大化期望回报的行动。所以如果
                                                  我们有了 :math:`Q^*$
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-98.def)

! Package ucs Error: Unknown Unicode character 25105 = U+6211,
(ucs)                possibly declared in uni-98.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 ...化期望回报的行动。所以如果我
                                                  们有了 :math:`Q^*$
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-78.def)

! Package ucs Error: Unknown Unicode character 20204 = U+4EEC,
(ucs)                possibly declared in uni-78.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 ...期望回报的行动。所以如果我们
                                                  有了 :math:`Q^*$
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-103.def)

! Package ucs Error: Unknown Unicode character 26377 = U+6709,
(ucs)                possibly declared in uni-103.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 ...望回报的行动。所以如果我们有
                                                  了 :math:`Q^*$
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-78.def)

! Package ucs Error: Unknown Unicode character 20102 = U+4E86,
(ucs)                possibly declared in uni-78.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 ...回报的行动。所以如果我们有了
                                                   :math:`Q^*$

Overfull \hbox (1421.73555pt too wide) in paragraph at lines 33&#8211;34
[]$\OML/cmm/m/it/14.4 s\OT1/cmr/m/n/14.4 `[][][][][][][][][][][][] : \OML/cmm/m
/it/14.4 math \OT1/cmr/m/n/14.4 : `\OML/cmm/m/it/14.4 s\OT1/cmr/m/n/14.4 `[][][
][][][][][][][][][][][][][][][][][][][][][][][][][][][][][][][][][][][][][][][]
[][][][][][][][] :
[1] (./math.aux) )
(see the transcript file for additional information)
Output written on math.dvi (1 page, 1068 bytes).
Transcript written on math.log.
</div>
，就可以通过下面的公式直接获得最优行动： <img class="math" src="../_images/math/217119cd0be21cd4d89636871a724e859a18c54d.svg" alt="a^*(s)"/>：</p>
<div class="math">
<p><img src="../_images/math/4a5e5d2aad03e229c014d1990a78732de2144b9a.svg" alt="a^*(s) = \arg \max_a Q^* (s,a)."/></p>
</div><p>注意：可能会有多个行为能够最大化 <img class="math" src="../_images/math/3a641ac6d7de30796ff8c186c31692dd609123a0.svg" alt="Q^*(s,a)"/>，这种情况下，它们都是最优行为，最优策略可能会从中随机选择一个。但是总会存在一个最优策略每一步选择行为的时候是确定的。</p>
</div>
<div class="section" id="id17">
<h3>贝尔曼方程<a class="headerlink" href="#id17" title="Permalink to this headline">¶</a></h3>
<p>全部四个值函数都遵守自一致性的方程叫做 <strong>贝尔曼方程</strong>，贝尔曼方程的基本思想是：</p>
<blockquote>
<div>起始点的值等于当前点预期值和下一个点的值之和。</div></blockquote>
<p>通策略值函数的贝尔曼方程：</p>
<div class="math">
<p><img src="../_images/math/79ebcb56fd4e6ab3dacd97ecf292f20c65e52f40.svg" alt="\begin{align*}
V^{\pi}(s) &amp;= \underE{a \sim \pi \\ s'\sim P}{r(s,a) + \gamma V^{\pi}(s')}, \\
Q^{\pi}(s,a) &amp;= \underE{s'\sim P}{r(s,a) + \gamma \underE{a'\sim \pi}{Q^{\pi}(s',a')}},
\end{align*}"/></p>
</div><p><img class="math" src="../_images/math/ad6bbdc678bfb97bf238df2294b123d8e4659211.svg" alt="s' \sim P"/> 是 <img class="math" src="../_images/math/b13ab0c59dbdf2e621eab45c58c04468828b298c.svg" alt="s' \sim P(\cdot |s,a)"/> 的简写, 表明下一个状态 <img class="math" src="../_images/math/e571b6cfaee799ef1b1226dab6f2b72a093cd7a7.svg" alt="s'"/> 是按照转换规则从环境中抽样得到的; <img class="math" src="../_images/math/208a0418872581e171aa0da9db2ff5fa19e482b7.svg" alt="a \sim \pi"/> 是 <img class="math" src="../_images/math/5359fa9db8fc409d8a93635b92a2b0a8e8b8f28d.svg" alt="a \sim \pi(\cdot|s)"/> 的简写; and <div class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<tt class="docutils">a' \sim \pi`是 :math:`a' \sim \pi(\cdot|s')</tt>)</p>
latex exited with error
[stdout]
This is pdfTeX, Version 3.14159265-2.6-1.40.19 (TeX Live 2018) (preloaded format=latex)
 restricted \write18 enabled.
entering extended mode
(./math.tex
LaTeX2e &lt;2018-04-01&gt; patch level 2
Babel &lt;3.18&gt; and hyphenation patterns for 84 language(s) loaded.
(/usr/local/texlive/2018/texmf-dist/tex/latex/base/article.cls
Document Class: article 2014/09/29 v1.4h Standard LaTeX document class
(/usr/local/texlive/2018/texmf-dist/tex/latex/base/size12.clo))
(/usr/local/texlive/2018/texmf-dist/tex/latex/base/inputenc.sty
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/utf8x.def))
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/ucs.sty
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-global.def))
(/usr/local/texlive/2018/texmf-dist/tex/latex/amsmath/amsmath.sty
For additional information on amsmath, use the `?&#8217; option.
(/usr/local/texlive/2018/texmf-dist/tex/latex/amsmath/amstext.sty
(/usr/local/texlive/2018/texmf-dist/tex/latex/amsmath/amsgen.sty))
(/usr/local/texlive/2018/texmf-dist/tex/latex/amsmath/amsbsy.sty)
(/usr/local/texlive/2018/texmf-dist/tex/latex/amsmath/amsopn.sty))
(/usr/local/texlive/2018/texmf-dist/tex/latex/amscls/amsthm.sty)
(/usr/local/texlive/2018/texmf-dist/tex/latex/amsfonts/amssymb.sty
(/usr/local/texlive/2018/texmf-dist/tex/latex/amsfonts/amsfonts.sty))
(/usr/local/texlive/2018/texmf-dist/tex/latex/anyfontsize/anyfontsize.sty)
(/usr/local/texlive/2018/texmf-dist/tex/latex/tools/bm.sty)
(/usr/local/texlive/2018/texmf-dist/tex/latex/algorithms/algorithm.sty
(/usr/local/texlive/2018/texmf-dist/tex/latex/float/float.sty)
(/usr/local/texlive/2018/texmf-dist/tex/latex/base/ifthen.sty))
(/usr/local/texlive/2018/texmf-dist/tex/latex/algorithms/algorithmic.sty
(/usr/local/texlive/2018/texmf-dist/tex/latex/graphics/keyval.sty))
(/usr/local/texlive/2018/texmf-dist/tex/latex/cancel/cancel.sty)
(/usr/local/texlive/2018/texmf-dist/tex/latex/geometry/geometry.sty
(/usr/local/texlive/2018/texmf-dist/tex/generic/oberdiek/ifpdf.sty)
(/usr/local/texlive/2018/texmf-dist/tex/generic/oberdiek/ifvtex.sty)
(/usr/local/texlive/2018/texmf-dist/tex/generic/ifxetex/ifxetex.sty))

Package geometry Warning: `bmargin&#8217; results in NEGATIVE (-144.54pt).
    `height&#8217; or `tmargin&#8217; should be shortened in length.

(./math.aux) (/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/ucsencs.def)
*geometry* driver: auto-detecting
*geometry* detected driver: dvips
*geometry* verbose mode - [ preamble ] result:
* driver: dvips
* paper: letterpaper
* layout: &lt;same size as paper&gt;
* layoutoffset:(h,v)=(0.0pt,0.0pt)
* modes: 
* h-part:(L,W,R)=(72.27pt, 469.75499pt, 72.27pt)
* v-part:(T,H,B)=(72.26999pt, 867.23999pt, -144.54pt)
* \paperwidth=614.295pt
* \paperheight=794.96999pt
* \textwidth=469.75499pt
* \textheight=867.23999pt
* \oddsidemargin=0.00002pt
* \evensidemargin=0.00002pt
* \topmargin=-37.0pt
* \headheight=12.0pt
* \headsep=25.0pt
* \topskip=12.0pt
* \footskip=30.0pt
* \marginparwidth=44.0pt
* \marginparsep=10.0pt
* \columnsep=10.0pt
* \skip\footins=10.8pt plus 4.0pt minus 2.0pt
* \hoffset=0.0pt
* \voffset=0.0pt
* \mag=1000
* \&#64;twocolumnfalse
* \&#64;twosidefalse
* \&#64;mparswitchfalse
* \&#64;reversemarginfalse
* (1in=72.27pt=25.4mm, 1cm=28.453pt)

(/usr/local/texlive/2018/texmf-dist/tex/latex/amsfonts/umsa.fd)
(/usr/local/texlive/2018/texmf-dist/tex/latex/amsfonts/umsb.fd)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-102.def)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-102.def)

! Package ucs Error: Unknown Unicode character 26159 = U+662F,
(ucs)                possibly declared in uni-102.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 \fontsize{14}{17}\selectfont $a&#8217; \sim \pi`是
                                                   :math:`a&#8217; \sim \pi(\cdot|...

[1] (./math.aux) )
(see the transcript file for additional information)
Output written on math.dvi (1 page, 512 bytes).
Transcript written on math.log.
</div>
 的简写.</p>
<p>最优值函数的贝尔曼方程是：</p>
<div class="math">
<p><img src="../_images/math/d68c87fb46a17130d25b040ad23fb2409ae764a1.svg" alt="\begin{align*}
V^*(s) &amp;= \max_a \underE{s'\sim P}{r(s,a) + \gamma V^*(s')}, \\
Q^*(s,a) &amp;= \underE{s'\sim P}{r(s,a) + \gamma \max_{a'} Q^*(s',a')}.
\end{align*}"/></p>
</div><p>同策略值函数和最优值函数的贝尔曼方程最大的区别是有无 <img class="math" src="../_images/math/f7d0d3d5adc0b470b1ce76ae6a4fdfe6d446d59b.svg" alt="\max"/> 。这表明智能体在选择下一步行动时，为了做出最优行动，他必须选择能获得最大值的行动。</p>
<div class="admonition- admonition">
<p class="first admonition-title">你应该知道</p>
<p class="last">贝尔曼算子（Bellman backup）会在强化学习中经常出现。对于一个状态或一个状态行动对，贝尔曼算子是贝尔曼方程的右边： 奖励加上一个值。</p>
</div>
</div>
<div class="section" id="advantage-functions">
<h3>优势函数（Advantage Functions）<a class="headerlink" href="#advantage-functions" title="Permalink to this headline">¶</a></h3>
<p>强化学习中，有些时候我们不需要描述一个行动的绝对好坏，而只需要知道它相对于平均水平的优势。也就是说，我们只想知道一个行动的相对 <strong>优势</strong> 。这个概念就被称为优势函数。</p>
<p>一个服从策略 <div class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<tt class="docutils">\pi`的优势函数，描述的是它在状态 :math:`s`下采取行为 :math:`a`比随机选择一个行为好多少（假设之后一直服从策略 :math:</tt>)</p>
latex exited with error
[stdout]
This is pdfTeX, Version 3.14159265-2.6-1.40.19 (TeX Live 2018) (preloaded format=latex)
 restricted \write18 enabled.
entering extended mode
(./math.tex
LaTeX2e &lt;2018-04-01&gt; patch level 2
Babel &lt;3.18&gt; and hyphenation patterns for 84 language(s) loaded.
(/usr/local/texlive/2018/texmf-dist/tex/latex/base/article.cls
Document Class: article 2014/09/29 v1.4h Standard LaTeX document class
(/usr/local/texlive/2018/texmf-dist/tex/latex/base/size12.clo))
(/usr/local/texlive/2018/texmf-dist/tex/latex/base/inputenc.sty
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/utf8x.def))
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/ucs.sty
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-global.def))
(/usr/local/texlive/2018/texmf-dist/tex/latex/amsmath/amsmath.sty
For additional information on amsmath, use the `?&#8217; option.
(/usr/local/texlive/2018/texmf-dist/tex/latex/amsmath/amstext.sty
(/usr/local/texlive/2018/texmf-dist/tex/latex/amsmath/amsgen.sty))
(/usr/local/texlive/2018/texmf-dist/tex/latex/amsmath/amsbsy.sty)
(/usr/local/texlive/2018/texmf-dist/tex/latex/amsmath/amsopn.sty))
(/usr/local/texlive/2018/texmf-dist/tex/latex/amscls/amsthm.sty)
(/usr/local/texlive/2018/texmf-dist/tex/latex/amsfonts/amssymb.sty
(/usr/local/texlive/2018/texmf-dist/tex/latex/amsfonts/amsfonts.sty))
(/usr/local/texlive/2018/texmf-dist/tex/latex/anyfontsize/anyfontsize.sty)
(/usr/local/texlive/2018/texmf-dist/tex/latex/tools/bm.sty)
(/usr/local/texlive/2018/texmf-dist/tex/latex/algorithms/algorithm.sty
(/usr/local/texlive/2018/texmf-dist/tex/latex/float/float.sty)
(/usr/local/texlive/2018/texmf-dist/tex/latex/base/ifthen.sty))
(/usr/local/texlive/2018/texmf-dist/tex/latex/algorithms/algorithmic.sty
(/usr/local/texlive/2018/texmf-dist/tex/latex/graphics/keyval.sty))
(/usr/local/texlive/2018/texmf-dist/tex/latex/cancel/cancel.sty)
(/usr/local/texlive/2018/texmf-dist/tex/latex/geometry/geometry.sty
(/usr/local/texlive/2018/texmf-dist/tex/generic/oberdiek/ifpdf.sty)
(/usr/local/texlive/2018/texmf-dist/tex/generic/oberdiek/ifvtex.sty)
(/usr/local/texlive/2018/texmf-dist/tex/generic/ifxetex/ifxetex.sty))

Package geometry Warning: `bmargin&#8217; results in NEGATIVE (-144.54pt).
    `height&#8217; or `tmargin&#8217; should be shortened in length.

(./math.aux) (/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/ucsencs.def)
*geometry* driver: auto-detecting
*geometry* detected driver: dvips
*geometry* verbose mode - [ preamble ] result:
* driver: dvips
* paper: letterpaper
* layout: &lt;same size as paper&gt;
* layoutoffset:(h,v)=(0.0pt,0.0pt)
* modes: 
* h-part:(L,W,R)=(72.27pt, 469.75499pt, 72.27pt)
* v-part:(T,H,B)=(72.26999pt, 867.23999pt, -144.54pt)
* \paperwidth=614.295pt
* \paperheight=794.96999pt
* \textwidth=469.75499pt
* \textheight=867.23999pt
* \oddsidemargin=0.00002pt
* \evensidemargin=0.00002pt
* \topmargin=-37.0pt
* \headheight=12.0pt
* \headsep=25.0pt
* \topskip=12.0pt
* \footskip=30.0pt
* \marginparwidth=44.0pt
* \marginparsep=10.0pt
* \columnsep=10.0pt
* \skip\footins=10.8pt plus 4.0pt minus 2.0pt
* \hoffset=0.0pt
* \voffset=0.0pt
* \mag=1000
* \&#64;twocolumnfalse
* \&#64;twosidefalse
* \&#64;mparswitchfalse
* \&#64;reversemarginfalse
* (1in=72.27pt=25.4mm, 1cm=28.453pt)

(/usr/local/texlive/2018/texmf-dist/tex/latex/amsfonts/umsa.fd)
(/usr/local/texlive/2018/texmf-dist/tex/latex/amsfonts/umsb.fd)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-118.def)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-118.def)

! Package ucs Error: Unknown Unicode character 30340 = U+7684,
(ucs)                possibly declared in uni-118.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 \fontsize{14}{17}\selectfont $\pi`的
                                          优势函数，描述的是它在�...

(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-79.def)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-79.def)

! Package ucs Error: Unknown Unicode character 20248 = U+4F18,
(ucs)                possibly declared in uni-79.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 \fontsize{14}{17}\selectfont $\pi`的优
                                             势函数，描述的是它在�...

(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-82.def)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-82.def)

! Package ucs Error: Unknown Unicode character 21183 = U+52BF,
(ucs)                possibly declared in uni-82.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 \fontsize{14}{17}\selectfont $\pi`的优势
                                                函数，描述的是它在�...

(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-81.def)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-81.def)

! Package ucs Error: Unknown Unicode character 20989 = U+51FD,
(ucs)                possibly declared in uni-81.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 ...tsize{14}{17}\selectfont $\pi`的优势函
                                                  数，描述的是它在�...

(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-101.def)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-101.def)

! Package ucs Error: Unknown Unicode character 25968 = U+6570,
(ucs)                possibly declared in uni-101.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 ...ze{14}{17}\selectfont $\pi`的优势函数
                                                  ，描述的是它在状�...

(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-255.def)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-255.def)

! Package ucs Error: Unknown Unicode character 65292 = U+FF0C,
(ucs)                possibly declared in uni-255.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 ...14}{17}\selectfont $\pi`的优势函数，
                                                  描述的是它在状态 :...

(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-99.def)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-99.def)

! Package ucs Error: Unknown Unicode character 25551 = U+63CF,
(ucs)                possibly declared in uni-99.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 ...{17}\selectfont $\pi`的优势函数，描
                                                  述的是它在状态 :mat...

(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-143.def)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-143.def)

! Package ucs Error: Unknown Unicode character 36848 = U+8FF0,
(ucs)                possibly declared in uni-143.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 ...}\selectfont $\pi`的优势函数，描述
                                                  的是它在状态 :math:`...


Package ucs Warning: Unknown character 30340 = 0x7684 appeared again. on input 
line 33.

(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-102.def)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-102.def)

! Package ucs Error: Unknown Unicode character 26159 = U+662F,
(ucs)                possibly declared in uni-102.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 ...ctfont $\pi`的优势函数，描述的是
                                                  它在状态 :math:`s`下�...

(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-91.def)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-91.def)

! Package ucs Error: Unknown Unicode character 23427 = U+5B83,
(ucs)                possibly declared in uni-91.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 ...ont $\pi`的优势函数，描述的是它
                                                  在状态 :math:`s`下采�...

(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-87.def)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-87.def)

! Package ucs Error: Unknown Unicode character 22312 = U+5728,
(ucs)                possibly declared in uni-87.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 ... $\pi`的优势函数，描述的是它在
                                                  状态 :math:`s`下采取�...

(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-114.def)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-114.def)

! Package ucs Error: Unknown Unicode character 29366 = U+72B6,
(ucs)                possibly declared in uni-114.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 ...pi`的优势函数，描述的是它在状
                                                  态 :math:`s`下采取行�...

(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-96.def)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-96.def)

! Package ucs Error: Unknown Unicode character 24577 = U+6001,
(ucs)                possibly declared in uni-96.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 ...的优势函数，描述的是它在状态
                                                   :math:`s`下采取行为 ...

(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-78.def)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-78.def)

! Package ucs Error: Unknown Unicode character 19979 = U+4E0B,
(ucs)                possibly declared in uni-78.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 ...��，描述的是它在状态 :math:`s`下
                                                  采取行为 :math:`a`比�...

(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-145.def)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-145.def)

! Package ucs Error: Unknown Unicode character 37319 = U+91C7,
(ucs)                possibly declared in uni-145.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 ...��描述的是它在状态 :math:`s`下采
                                                  取行为 :math:`a`比随�...

(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-83.def)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-83.def)

! Package ucs Error: Unknown Unicode character 21462 = U+53D6,
(ucs)                possibly declared in uni-83.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 ...��述的是它在状态 :math:`s`下采取
                                                  行为 :math:`a`比随机�...

(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-136.def)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-136.def)

! Package ucs Error: Unknown Unicode character 34892 = U+884C,
(ucs)                possibly declared in uni-136.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 ...��的是它在状态 :math:`s`下采取行
                                                  为 :math:`a`比随机选�...

(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-78.def)

! Package ucs Error: Unknown Unicode character 20026 = U+4E3A,
(ucs)                possibly declared in uni-78.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 ...��是它在状态 :math:`s`下采取行为
                                                   :math:`a`比随机选择�...

(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-107.def)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-107.def)

! Package ucs Error: Unknown Unicode character 27604 = U+6BD4,
(ucs)                possibly declared in uni-107.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 ...�态 :math:`s`下采取行为 :math:`a`比
                                                  随机选择一个行为�...

(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-150.def)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-150.def)

! Package ucs Error: Unknown Unicode character 38543 = U+968F,
(ucs)                possibly declared in uni-150.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 ...� :math:`s`下采取行为 :math:`a`比随
                                                  机选择一个行为好�...

(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-103.def)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-103.def)

! Package ucs Error: Unknown Unicode character 26426 = U+673A,
(ucs)                possibly declared in uni-103.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 ...math:`s`下采取行为 :math:`a`比随机
                                                  选择一个行为好多�...

(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-144.def)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-144.def)

! Package ucs Error: Unknown Unicode character 36873 = U+9009,
(ucs)                possibly declared in uni-144.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 ...h:`s`下采取行为 :math:`a`比随机选
                                                  择一个行为好多少�...

(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-98.def)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-98.def)

! Package ucs Error: Unknown Unicode character 25321 = U+62E9,
(ucs)                possibly declared in uni-98.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 ...s`下采取行为 :math:`a`比随机选择
                                                  一个行为好多少（�...

(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-78.def)

! Package ucs Error: Unknown Unicode character 19968 = U+4E00,
(ucs)                possibly declared in uni-78.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 ...��采取行为 :math:`a`比随机选择一
                                                  个行为好多少（假�...

(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-78.def)

! Package ucs Error: Unknown Unicode character 20010 = U+4E2A,
(ucs)                possibly declared in uni-78.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 ...��取行为 :math:`a`比随机选择一个
                                                  行为好多少（假设�...


Package ucs Warning: Unknown character 34892 = 0x884C appeared again. on input 
line 33.


Package ucs Warning: Unknown character 20026 = 0x4E3A appeared again. on input 
line 33.

(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-89.def)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-89.def)

! Package ucs Error: Unknown Unicode character 22909 = U+597D,
(ucs)                possibly declared in uni-89.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 ...�� :math:`a`比随机选择一个行为好
                                                  多少（假设之后一�...

(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-89.def)

! Package ucs Error: Unknown Unicode character 22810 = U+591A,
(ucs)                possibly declared in uni-89.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 ...:math:`a`比随机选择一个行为好多
                                                  少（假设之后一直�...

(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-92.def)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-92.def)

! Package ucs Error: Unknown Unicode character 23569 = U+5C11,
(ucs)                possibly declared in uni-92.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 ...th:`a`比随机选择一个行为好多少
                                                  （假设之后一直服�...

(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-255.def)

! Package ucs Error: Unknown Unicode character 65288 = U+FF08,
(ucs)                possibly declared in uni-255.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 ...`a`比随机选择一个行为好多少（
                                                  假设之后一直服从�...

(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-80.def)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-80.def)

! Package ucs Error: Unknown Unicode character 20551 = U+5047,
(ucs)                possibly declared in uni-80.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 ...比随机选择一个行为好多少（假
                                                  设之后一直服从策�...

(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-139.def)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-139.def)

! Package ucs Error: Unknown Unicode character 35774 = U+8BBE,
(ucs)                possibly declared in uni-139.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 ...随机选择一个行为好多少（假设
                                                  之后一直服从策略 :...

(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-78.def)

! Package ucs Error: Unknown Unicode character 20043 = U+4E4B,
(ucs)                possibly declared in uni-78.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 ...机选择一个行为好多少（假设之
                                                  后一直服从策略 :math:$

(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-84.def)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-84.def)

! Package ucs Error: Unknown Unicode character 21518 = U+540E,
(ucs)                possibly declared in uni-84.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 ...选择一个行为好多少（假设之后
                                                  一直服从策略 :math:$

Package ucs Warning: Unknown character 19968 = 0x4E00 appeared again. on input 
line 33.

(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-118.def)

! Package ucs Error: Unknown Unicode character 30452 = U+76F4,
(ucs)                possibly declared in uni-118.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 ...一个行为好多少（假设之后一直
                                                  服从策略 :math:$
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-103.def)

! Package ucs Error: Unknown Unicode character 26381 = U+670D,
(ucs)                possibly declared in uni-103.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 ...个行为好多少（假设之后一直服
                                                  从策略 :math:$
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-78.def)

! Package ucs Error: Unknown Unicode character 20174 = U+4ECE,
(ucs)                possibly declared in uni-78.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 ...行为好多少（假设之后一直服从
                                                  策略 :math:$
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-123.def)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-123.def)

! Package ucs Error: Unknown Unicode character 31574 = U+7B56,
(ucs)                possibly declared in uni-123.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 ...为好多少（假设之后一直服从策
                                                  略 :math:$
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-117.def)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uninames.dat)
(/usr/local/texlive/2018/texmf-dist/tex/latex/ucs/data/uni-117.def)

! Package ucs Error: Unknown Unicode character 30053 = U+7565,
(ucs)                possibly declared in uni-117.def.
(ucs)                Type H to see if it is available with options.

See the ucs package documentation for explanation.
Type  H &lt;return&gt;  for immediate help.
 ...                                              
                                                  
l.33 ...好多少（假设之后一直服从策略
                                                   :math:$

Overfull \hbox (374.51897pt too wide) in paragraph at lines 33&#8211;34
[]$\OML/cmm/m/it/14.4 ^^Y\OT1/cmr/m/n/14.4 `[][][][][][][][][][][][][][][][][][
][][][][][][][][][][] :

Overfull \hbox (1279.37096pt too wide) in paragraph at lines 33&#8211;34
\OML/cmm/m/it/14.4 math \OT1/cmr/m/n/14.4 : `\OML/cmm/m/it/14.4 s\OT1/cmr/m/n/1
4.4 `[][][][][][][][][][] : \OML/cmm/m/it/14.4 math \OT1/cmr/m/n/14.4 : `\OML/c
mm/m/it/14.4 a\OT1/cmr/m/n/14.4 `[][][][][][][][][][][][][][][][][][][][][][][]
[][][][][][][][][][][][][][][][][][][][][][][] :
[1] (./math.aux) )
(see the transcript file for additional information)
Output written on math.dvi (1 page, 1264 bytes).
Transcript written on math.log.
</div>
pi` ）。数学角度上，优势函数的定义为：</p>
<div class="math">
<p><img src="../_images/math/a596eb68ba26e424afaff142ae747d5cffd2be60.svg" alt="A^{\pi}(s,a) = Q^{\pi}(s,a) - V^{\pi}(s)."/></p>
</div><div class="admonition- admonition">
<p class="first admonition-title">你应该知道</p>
<p class="last">我们之后会继续谈论这部分，优势函数对于策略梯度方法来说非常重要。</p>
</div>
</div>
</div>
<div class="section" id="id18">
<h2><a class="toc-backref" href="#id23">数学模型（可选）</a><a class="headerlink" href="#id18" title="Permalink to this headline">¶</a></h2>
<p>我们已经非正式地讨论了智能体的环境，但是如果你深入研究，可能会发现这样的标准数学形式：<strong>马尔科夫决策过程</strong> (Markov Decision Processes, MDPs).MDP是一个5元组 <img class="math" src="../_images/math/677b3fbb988b8a8e6218c9be5c86de2be3ff4e67.svg" alt="\langle S, A, R, P, \rho_0 \rangle"/>, 其中</p>
<ul class="simple">
<li><img class="math" src="../_images/math/2ab5ab83469706ab8836e86f15564913d45841f3.svg" alt="S"/> 是所有有效状态的集合,</li>
<li><img class="math" src="../_images/math/c65f5e15bab0ef7ff195cf8d2f4be7b3f88799c1.svg" alt="A"/> 是所有有效动作的集合,</li>
<li><img class="math" src="../_images/math/d6106e5c927964f012840fbdb2f6756e0478126f.svg" alt="R : S \times A \times S \to \mathbb{R}"/> 是奖励函数，其中 <img class="math" src="../_images/math/b53acbb815e813f805cd57b1ea15e6a497c8ddea.svg" alt="r_t = R(s_t, a_t, s_{t+1})"/>,</li>
<li><img class="math" src="../_images/math/3c87975dbb83cb5f033ed8a00f911eacb5593b79.svg" alt="P : S \times A \to \mathcal{P}(S)"/> 是转态转移的规则，其中 <img class="math" src="../_images/math/811e1959db4dd2c71d9806ee337d5014b96904df.svg" alt="P(s'|s,a)"/> 是在状态  <img class="math" src="../_images/math/2f2cb3307c5fd6504354c54022ea6e82c9629309.svg" alt="s"/> 下 采取动作 <img class="math" src="../_images/math/045c129c396240f9c4f59bee864337cea3896ef0.svg" alt="a"/> 转移到状态 <img class="math" src="../_images/math/e571b6cfaee799ef1b1226dab6f2b72a093cd7a7.svg" alt="s'"/> 的概率。</li>
<li>and <img class="math" src="../_images/math/b9c31eb35f400fd8e50b2d39bfe5698a50b9b6b5.svg" alt="\rho_0"/> is the starting state distribution.</li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="rl_intro2.html" class="btn btn-neutral float-right" title="第二部分：各种各种的强化学习算法" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../user/plotting.html" class="btn btn-neutral" title="绘制结果" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, OpenAI.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  <script type="text/javascript" src="../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>